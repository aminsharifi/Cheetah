@inherits CUpsert_GeneralCode

<CEditDimentions Record="@Record" Records="@Records" IsInline="@IsInline"
                 Name="D_RequestTitle" Id="@Id" reference="@reference"
                 ParentCallback="@ParentCallback" Title="@Title"
                 LinkRecords="@LinkRecords">
    <RowTemplate>
        <CInput @bind-LValue="(Record as D_RequestTitle).RT_EndorsementPatternId"
                Records="@ListRecord"
                CDescription="نوع پارامتر"
                Record="@((Record as D_RequestTitle).RT_EndorsementPattern)"
                SelectedProcessesChanged="@SelectedProcessesChanged"
                CDisplayName="نوع الگو"
                CFieldType="@(FieldType.CSelect)"
                reference="@reference"></CInput>
    </RowTemplate>
</CEditDimentions>
@code {
    public IEnumerable<SimpleClass> ListRecord { get; set; }

    public override async Task ExtendedLoadDTO()
    {
        ListRecord = await simpleClassRepository.GetAllByName("D_EndorsementPattern");
    }

    private async Task SelectedProcessesChanged(ChangeEventArgs e)
    {
        if (Id > 0 && e.Value is not null)
        {
            var selectedRecord = Int64.Parse(e.Value.ToString());

            (Record as D_RequestTitle).RT_EndorsementPattern = ListRecord
            .First(x => x.Id == selectedRecord) as D_EndorsementPattern;
        }
    }
}
