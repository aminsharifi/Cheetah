@inherits CUpsert_GeneralCode

<CEditDimentions Record="@Record" Records="@Records" IsInline="@IsInline"
                 Name="D_Role" Id="@Id" reference="@reference"
                 ParentCallback="@ParentCallback" Title="@Title"
                 LinkRecords="@LinkRecords">
    <RowTemplate>
        <LinkComponent Records="@LinkRecords"
                       reference="@reference"
                       Title="@($"لیست سمت هایی که در نقش {Record?.PDisplayName} هستند")">
        </LinkComponent>
        <NavLink href="@($"Dimentions/Edit/F_EndorsementRole/D_Role/{Record.Id}/{reference}")"
                 class="link-primary my-1">
            <strong>لیست تخصیص نقش‌های در نظر گرفته شده</strong>
        </NavLink>
    </RowTemplate>
</CEditDimentions>
@code {
    public override async Task ExtendedLoadDTO()
    {
        var AllRecords = await simpleClassRepository.GetAllByName("D_Position");
        var AllLink = await simpleClassRepository.GetAllLink("L_RolePosition", SD.First, Id);

        this.LinkRecords = new SimpleLinkClassDTO()
            {
                linkType = "L_RolePosition",
                firstType = "D_Role",
                secondType = "D_Position",
                fixedId = Id,
                sd_Status = SD.First,
                floatState = AllRecords.Select(x => new KeyValuePair<Tuple<long, string>, Boolean>(
                    new Tuple<long, string>(x.Id, x.PDisplayName),
                    AllLink.Any(y => y.FirstId == Id && y.SecondId == x.Id)))
                            .ToDictionary(x => x.Key, x => x.Value)
            };
    }
}